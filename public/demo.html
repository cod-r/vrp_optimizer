<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
          integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
          crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
            integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
            crossorigin=""></script>

    <title>My Web Page</title>

</head>

<style>
    #mapid {
        height: 800px;
    }
</style>

<body>
<div id="mapid"></div>
</body>

<script>
    const routeGeoJson = {
        "type": "FeatureCollection",
        "features": [
            {
                "bbox": [
                    26.090178,
                    44.411687,
                    26.163932,
                    44.444335
                ],
                "type": "Feature",
                "properties": {
                    "extras": {
                        "roadaccessrestrictions": {
                            "values": [
                                [
                                    0,
                                    130,
                                    0
                                ],
                                [
                                    130,
                                    134,
                                    16
                                ],
                                [
                                    134,
                                    385,
                                    0
                                ]
                            ],
                            "summary": [
                                {
                                    "value": 0.0,
                                    "distance": 13492.1,
                                    "amount": 99.26
                                },
                                {
                                    "value": 16.0,
                                    "distance": 101.2,
                                    "amount": 0.74
                                }
                            ]
                        }
                    },
                    "warnings": [
                        {
                            "code": 1,
                            "message": "There may be restrictions on some roads"
                        }
                    ],
                    "summary": {
                        "distance": 13593.3,
                        "duration": 1035.1
                    },
                    "way_points": [
                        0,
                        137,
                        385
                    ]
                },
                "geometry": {
                    "coordinates": [
                        [
                            26.134678,
                            44.444335
                        ],
                        [
                            26.134789,
                            44.44396
                        ],
                        [
                            26.13546,
                            44.444058
                        ],
                        [
                            26.135526,
                            44.443733
                        ],
                        [
                            26.135068,
                            44.443662
                        ],
                        [
                            26.135191,
                            44.443196
                        ],
                        [
                            26.135293,
                            44.442943
                        ],
                        [
                            26.135449,
                            44.442702
                        ],
                        [
                            26.135627,
                            44.442749
                        ],
                        [
                            26.135771,
                            44.442368
                        ],
                        [
                            26.135296,
                            44.442257
                        ],
                        [
                            26.135047,
                            44.442207
                        ],
                        [
                            26.134559,
                            44.442099
                        ],
                        [
                            26.134541,
                            44.442086
                        ],
                        [
                            26.134537,
                            44.442067
                        ],
                        [
                            26.134801,
                            44.441535
                        ],
                        [
                            26.134843,
                            44.441449
                        ],
                        [
                            26.13446,
                            44.441405
                        ],
                        [
                            26.134314,
                            44.441386
                        ],
                        [
                            26.134076,
                            44.441359
                        ],
                        [
                            26.133979,
                            44.441368
                        ],
                        [
                            26.133792,
                            44.44136
                        ],
                        [
                            26.133459,
                            44.441303
                        ],
                        [
                            26.133349,
                            44.441277
                        ],
                        [
                            26.133175,
                            44.441236
                        ],
                        [
                            26.133224,
                            44.441204
                        ],
                        [
                            26.133705,
                            44.440843
                        ],
                        [
                            26.133755,
                            44.440803
                        ],
                        [
                            26.134078,
                            44.44051
                        ],
                        [
                            26.134282,
                            44.440306
                        ],
                        [
                            26.134467,
                            44.440067
                        ],
                        [
                            26.135129,
                            44.439137
                        ],
                        [
                            26.135449,
                            44.438678
                        ],
                        [
                            26.135965,
                            44.43793
                        ],
                        [
                            26.1361,
                            44.437727
                        ],
                        [
                            26.136157,
                            44.437634
                        ],
                        [
                            26.136256,
                            44.437465
                        ],
                        [
                            26.136303,
                            44.437369
                        ],
                        [
                            26.136385,
                            44.437147
                        ],
                        [
                            26.136444,
                            44.436991
                        ],
                        [
                            26.136714,
                            44.436275
                        ],
                        [
                            26.136901,
                            44.435807
                        ],
                        [
                            26.13716,
                            44.435127
                        ],
                        [
                            26.137175,
                            44.435094
                        ],
                        [
                            26.137447,
                            44.434517
                        ],
                        [
                            26.1375,
                            44.434074
                        ],
                        [
                            26.137645,
                            44.433674
                        ],
                        [
                            26.138,
                            44.4327
                        ],
                        [
                            26.138116,
                            44.432395
                        ],
                        [
                            26.138163,
                            44.432264
                        ],
                        [
                            26.13827,
                            44.432013
                        ],
                        [
                            26.138286,
                            44.431979
                        ],
                        [
                            26.138367,
                            44.431794
                        ],
                        [
                            26.13839,
                            44.43174
                        ],
                        [
                            26.138455,
                            44.431592
                        ],
                        [
                            26.138581,
                            44.4313
                        ],
                        [
                            26.138707,
                            44.43101
                        ],
                        [
                            26.138811,
                            44.430745
                        ],
                        [
                            26.138863,
                            44.430554
                        ],
                        [
                            26.138913,
                            44.430239
                        ],
                        [
                            26.138918,
                            44.430045
                        ],
                        [
                            26.138915,
                            44.42979
                        ],
                        [
                            26.138902,
                            44.429638
                        ],
                        [
                            26.138896,
                            44.429418
                        ],
                        [
                            26.138932,
                            44.429284
                        ],
                        [
                            26.138849,
                            44.42906
                        ],
                        [
                            26.13883,
                            44.429011
                        ],
                        [
                            26.138729,
                            44.428748
                        ],
                        [
                            26.138674,
                            44.428619
                        ],
                        [
                            26.138663,
                            44.428593
                        ],
                        [
                            26.138634,
                            44.42852
                        ],
                        [
                            26.138553,
                            44.428342
                        ],
                        [
                            26.138057,
                            44.427198
                        ],
                        [
                            26.137772,
                            44.42654
                        ],
                        [
                            26.137549,
                            44.425932
                        ],
                        [
                            26.137508,
                            44.425797
                        ],
                        [
                            26.137436,
                            44.425536
                        ],
                        [
                            26.137394,
                            44.425358
                        ],
                        [
                            26.137357,
                            44.425147
                        ],
                        [
                            26.137292,
                            44.424739
                        ],
                        [
                            26.137277,
                            44.424625
                        ],
                        [
                            26.137242,
                            44.423997
                        ],
                        [
                            26.137239,
                            44.423919
                        ],
                        [
                            26.137229,
                            44.423609
                        ],
                        [
                            26.137221,
                            44.423431
                        ],
                        [
                            26.137216,
                            44.42339
                        ],
                        [
                            26.137206,
                            44.423325
                        ],
                        [
                            26.136923,
                            44.421733
                        ],
                        [
                            26.136859,
                            44.421367
                        ],
                        [
                            26.136712,
                            44.420526
                        ],
                        [
                            26.13667,
                            44.420318
                        ],
                        [
                            26.136657,
                            44.420277
                        ],
                        [
                            26.13664,
                            44.420224
                        ],
                        [
                            26.136622,
                            44.420185
                        ],
                        [
                            26.136716,
                            44.420159
                        ],
                        [
                            26.136808,
                            44.420129
                        ],
                        [
                            26.136969,
                            44.420093
                        ],
                        [
                            26.137201,
                            44.420031
                        ],
                        [
                            26.137269,
                            44.420011
                        ],
                        [
                            26.137728,
                            44.41989
                        ],
                        [
                            26.138058,
                            44.419804
                        ],
                        [
                            26.1388,
                            44.419601
                        ],
                        [
                            26.1394,
                            44.419438
                        ],
                        [
                            26.13989,
                            44.419301
                        ],
                        [
                            26.140091,
                            44.419245
                        ],
                        [
                            26.140318,
                            44.419184
                        ],
                        [
                            26.142073,
                            44.418737
                        ],
                        [
                            26.14295,
                            44.418514
                        ],
                        [
                            26.143465,
                            44.418381
                        ],
                        [
                            26.143595,
                            44.418349
                        ],
                        [
                            26.145693,
                            44.417796
                        ],
                        [
                            26.145967,
                            44.417714
                        ],
                        [
                            26.146147,
                            44.417657
                        ],
                        [
                            26.146364,
                            44.417587
                        ],
                        [
                            26.146479,
                            44.417549
                        ],
                        [
                            26.147886,
                            44.416994
                        ],
                        [
                            26.152471,
                            44.415116
                        ],
                        [
                            26.15296,
                            44.414909
                        ],
                        [
                            26.153098,
                            44.41485
                        ],
                        [
                            26.153198,
                            44.414809
                        ],
                        [
                            26.153306,
                            44.414763
                        ],
                        [
                            26.153455,
                            44.414704
                        ],
                        [
                            26.154975,
                            44.414095
                        ],
                        [
                            26.155402,
                            44.413954
                        ],
                        [
                            26.155638,
                            44.413877
                        ],
                        [
                            26.156206,
                            44.413732
                        ],
                        [
                            26.156695,
                            44.413619
                        ],
                        [
                            26.156756,
                            44.413605
                        ],
                        [
                            26.157007,
                            44.413557
                        ],
                        [
                            26.157523,
                            44.413474
                        ],
                        [
                            26.157633,
                            44.41346
                        ],
                        [
                            26.157672,
                            44.413394
                        ],
                        [
                            26.157807,
                            44.413169
                        ],
                        [
                            26.1579,
                            44.413
                        ],
                        [
                            26.158121,
                            44.412619
                        ],
                        [
                            26.159715,
                            44.412545
                        ],
                        [
                            26.159792,
                            44.412542
                        ],
                        [
                            26.160411,
                            44.412512
                        ],
                        [
                            26.160619,
                            44.412502
                        ],
                        [
                            26.160829,
                            44.412466
                        ],
                        [
                            26.161528,
                            44.412663
                        ],
                        [
                            26.161625,
                            44.412691
                        ],
                        [
                            26.161692,
                            44.412719
                        ],
                        [
                            26.161787,
                            44.412811
                        ],
                        [
                            26.162652,
                            44.412752
                        ],
                        [
                            26.162752,
                            44.412706
                        ],
                        [
                            26.1628,
                            44.412633
                        ],
                        [
                            26.162743,
                            44.412146
                        ],
                        [
                            26.163116,
                            44.412001
                        ],
                        [
                            26.163196,
                            44.411969
                        ],
                        [
                            26.163173,
                            44.411842
                        ],
                        [
                            26.163163,
                            44.411726
                        ],
                        [
                            26.163376,
                            44.411687
                        ],
                        [
                            26.163392,
                            44.41181
                        ],
                        [
                            26.163442,
                            44.412061
                        ],
                        [
                            26.163797,
                            44.412856
                        ],
                        [
                            26.163835,
                            44.412939
                        ],
                        [
                            26.163883,
                            44.41305
                        ],
                        [
                            26.163932,
                            44.413162
                        ],
                        [
                            26.163692,
                            44.413202
                        ],
                        [
                            26.163526,
                            44.41322
                        ],
                        [
                            26.162935,
                            44.413288
                        ],
                        [
                            26.162484,
                            44.413342
                        ],
                        [
                            26.161829,
                            44.41339
                        ],
                        [
                            26.160999,
                            44.413449
                        ],
                        [
                            26.159201,
                            44.413575
                        ],
                        [
                            26.158232,
                            44.413649
                        ],
                        [
                            26.157976,
                            44.413672
                        ],
                        [
                            26.157851,
                            44.413684
                        ],
                        [
                            26.15702,
                            44.413805
                        ],
                        [
                            26.156458,
                            44.413916
                        ],
                        [
                            26.156002,
                            44.414028
                        ],
                        [
                            26.155592,
                            44.414151
                        ],
                        [
                            26.155294,
                            44.414246
                        ],
                        [
                            26.154993,
                            44.414352
                        ],
                        [
                            26.153625,
                            44.414901
                        ],
                        [
                            26.153524,
                            44.41494
                        ],
                        [
                            26.153421,
                            44.414982
                        ],
                        [
                            26.153273,
                            44.415045
                        ],
                        [
                            26.151827,
                            44.415648
                        ],
                        [
                            26.151432,
                            44.415813
                        ],
                        [
                            26.150494,
                            44.416197
                        ],
                        [
                            26.149637,
                            44.416547
                        ],
                        [
                            26.149583,
                            44.416571
                        ],
                        [
                            26.148676,
                            44.416938
                        ],
                        [
                            26.147723,
                            44.417317
                        ],
                        [
                            26.147,
                            44.417601
                        ],
                        [
                            26.14679,
                            44.417679
                        ],
                        [
                            26.146719,
                            44.417706
                        ],
                        [
                            26.146502,
                            44.417774
                        ],
                        [
                            26.146371,
                            44.417814
                        ],
                        [
                            26.146327,
                            44.417827
                        ],
                        [
                            26.146277,
                            44.41784
                        ],
                        [
                            26.146103,
                            44.417895
                        ],
                        [
                            26.14581,
                            44.417991
                        ],
                        [
                            26.145476,
                            44.418091
                        ],
                        [
                            26.145047,
                            44.41821
                        ],
                        [
                            26.143927,
                            44.418513
                        ],
                        [
                            26.142952,
                            44.418767
                        ],
                        [
                            26.140719,
                            44.419318
                        ],
                        [
                            26.140182,
                            44.419444
                        ],
                        [
                            26.139787,
                            44.419548
                        ],
                        [
                            26.139549,
                            44.419609
                        ],
                        [
                            26.139505,
                            44.419619
                        ],
                        [
                            26.139186,
                            44.419699
                        ],
                        [
                            26.137734,
                            44.420078
                        ],
                        [
                            26.137343,
                            44.420176
                        ],
                        [
                            26.137279,
                            44.420192
                        ],
                        [
                            26.136917,
                            44.420258
                        ],
                        [
                            26.136852,
                            44.420267
                        ],
                        [
                            26.136751,
                            44.420272
                        ],
                        [
                            26.136657,
                            44.420277
                        ],
                        [
                            26.136589,
                            44.420284
                        ],
                        [
                            26.136229,
                            44.420321
                        ],
                        [
                            26.136054,
                            44.420344
                        ],
                        [
                            26.135437,
                            44.42042
                        ],
                        [
                            26.13499,
                            44.420476
                        ],
                        [
                            26.134667,
                            44.420515
                        ],
                        [
                            26.134487,
                            44.420538
                        ],
                        [
                            26.13433,
                            44.420559
                        ],
                        [
                            26.133928,
                            44.420622
                        ],
                        [
                            26.133882,
                            44.420629
                        ],
                        [
                            26.133759,
                            44.420651
                        ],
                        [
                            26.133653,
                            44.420674
                        ],
                        [
                            26.133322,
                            44.420788
                        ],
                        [
                            26.13311,
                            44.420888
                        ],
                        [
                            26.132552,
                            44.421171
                        ],
                        [
                            26.13146,
                            44.421769
                        ],
                        [
                            26.131348,
                            44.421841
                        ],
                        [
                            26.13095,
                            44.422042
                        ],
                        [
                            26.130443,
                            44.422294
                        ],
                        [
                            26.130025,
                            44.422503
                        ],
                        [
                            26.129915,
                            44.422555
                        ],
                        [
                            26.129553,
                            44.422728
                        ],
                        [
                            26.129126,
                            44.42293
                        ],
                        [
                            26.128446,
                            44.423229
                        ],
                        [
                            26.128229,
                            44.423291
                        ],
                        [
                            26.128205,
                            44.423298
                        ],
                        [
                            26.127973,
                            44.423349
                        ],
                        [
                            26.127852,
                            44.423368
                        ],
                        [
                            26.127562,
                            44.42342
                        ],
                        [
                            26.126961,
                            44.423531
                        ],
                        [
                            26.1264,
                            44.423635
                        ],
                        [
                            26.125773,
                            44.423758
                        ],
                        [
                            26.125065,
                            44.423899
                        ],
                        [
                            26.123741,
                            44.424163
                        ],
                        [
                            26.123668,
                            44.424167
                        ],
                        [
                            26.123532,
                            44.424151
                        ],
                        [
                            26.123521,
                            44.424275
                        ],
                        [
                            26.123517,
                            44.424332
                        ],
                        [
                            26.123477,
                            44.424434
                        ],
                        [
                            26.123422,
                            44.424515
                        ],
                        [
                            26.123272,
                            44.424651
                        ],
                        [
                            26.123151,
                            44.424803
                        ],
                        [
                            26.123084,
                            44.424902
                        ],
                        [
                            26.123036,
                            44.425012
                        ],
                        [
                            26.123032,
                            44.425044
                        ],
                        [
                            26.123087,
                            44.42562
                        ],
                        [
                            26.123091,
                            44.42566
                        ],
                        [
                            26.123103,
                            44.425766
                        ],
                        [
                            26.123119,
                            44.425923
                        ],
                        [
                            26.122963,
                            44.42593
                        ],
                        [
                            26.122443,
                            44.425954
                        ],
                        [
                            26.122233,
                            44.425963
                        ],
                        [
                            26.119394,
                            44.426094
                        ],
                        [
                            26.119264,
                            44.4261
                        ],
                        [
                            26.119154,
                            44.426105
                        ],
                        [
                            26.119069,
                            44.426109
                        ],
                        [
                            26.118984,
                            44.426113
                        ],
                        [
                            26.118838,
                            44.42612
                        ],
                        [
                            26.118385,
                            44.42614
                        ],
                        [
                            26.118137,
                            44.426153
                        ],
                        [
                            26.11635,
                            44.426235
                        ],
                        [
                            26.1163,
                            44.426236
                        ],
                        [
                            26.116185,
                            44.426242
                        ],
                        [
                            26.11608,
                            44.426246
                        ],
                        [
                            26.114897,
                            44.426299
                        ],
                        [
                            26.112477,
                            44.426412
                        ],
                        [
                            26.112124,
                            44.426428
                        ],
                        [
                            26.111957,
                            44.426436
                        ],
                        [
                            26.111776,
                            44.426444
                        ],
                        [
                            26.111373,
                            44.426462
                        ],
                        [
                            26.109912,
                            44.426528
                        ],
                        [
                            26.109096,
                            44.426565
                        ],
                        [
                            26.105384,
                            44.426733
                        ],
                        [
                            26.10505,
                            44.426748
                        ],
                        [
                            26.104087,
                            44.426792
                        ],
                        [
                            26.103984,
                            44.426797
                        ],
                        [
                            26.103972,
                            44.426889
                        ],
                        [
                            26.103955,
                            44.427029
                        ],
                        [
                            26.103847,
                            44.427983
                        ],
                        [
                            26.103825,
                            44.428198
                        ],
                        [
                            26.103848,
                            44.428307
                        ],
                        [
                            26.103869,
                            44.428404
                        ],
                        [
                            26.103904,
                            44.428523
                        ],
                        [
                            26.103972,
                            44.428704
                        ],
                        [
                            26.103993,
                            44.428765
                        ],
                        [
                            26.104001,
                            44.428812
                        ],
                        [
                            26.103995,
                            44.428853
                        ],
                        [
                            26.103981,
                            44.428895
                        ],
                        [
                            26.103961,
                            44.428936
                        ],
                        [
                            26.103948,
                            44.428962
                        ],
                        [
                            26.103862,
                            44.429139
                        ],
                        [
                            26.103779,
                            44.429473
                        ],
                        [
                            26.103673,
                            44.431487
                        ],
                        [
                            26.103631,
                            44.431891
                        ],
                        [
                            26.103598,
                            44.432056
                        ],
                        [
                            26.10344,
                            44.432765
                        ],
                        [
                            26.10323,
                            44.433655
                        ],
                        [
                            26.103214,
                            44.433725
                        ],
                        [
                            26.103218,
                            44.433898
                        ],
                        [
                            26.103072,
                            44.434363
                        ],
                        [
                            26.102749,
                            44.435354
                        ],
                        [
                            26.102723,
                            44.435444
                        ],
                        [
                            26.102727,
                            44.435451
                        ],
                        [
                            26.102739,
                            44.435494
                        ],
                        [
                            26.102699,
                            44.435602
                        ],
                        [
                            26.102651,
                            44.435643
                        ],
                        [
                            26.102633,
                            44.435651
                        ],
                        [
                            26.10258,
                            44.43567
                        ],
                        [
                            26.102439,
                            44.435674
                        ],
                        [
                            26.10233,
                            44.435634
                        ],
                        [
                            26.102296,
                            44.435608
                        ],
                        [
                            26.102277,
                            44.43559
                        ],
                        [
                            26.10226,
                            44.43557
                        ],
                        [
                            26.10225,
                            44.435554
                        ],
                        [
                            26.102249,
                            44.435538
                        ],
                        [
                            26.10175,
                            44.435399
                        ],
                        [
                            26.101544,
                            44.435342
                        ],
                        [
                            26.100712,
                            44.435193
                        ],
                        [
                            26.09966,
                            44.43501
                        ],
                        [
                            26.099553,
                            44.434995
                        ],
                        [
                            26.099541,
                            44.43511
                        ],
                        [
                            26.099485,
                            44.435631
                        ],
                        [
                            26.099451,
                            44.435968
                        ],
                        [
                            26.099429,
                            44.436398
                        ],
                        [
                            26.099359,
                            44.436595
                        ],
                        [
                            26.099188,
                            44.436882
                        ],
                        [
                            26.099123,
                            44.436971
                        ],
                        [
                            26.09908,
                            44.437021
                        ],
                        [
                            26.09878,
                            44.437245
                        ],
                        [
                            26.098662,
                            44.437328
                        ],
                        [
                            26.098569,
                            44.437349
                        ],
                        [
                            26.098473,
                            44.437348
                        ],
                        [
                            26.098258,
                            44.437329
                        ],
                        [
                            26.097763,
                            44.437257
                        ],
                        [
                            26.097614,
                            44.43724
                        ],
                        [
                            26.097476,
                            44.437209
                        ],
                        [
                            26.097115,
                            44.437144
                        ],
                        [
                            26.096796,
                            44.437097
                        ],
                        [
                            26.096508,
                            44.437083
                        ],
                        [
                            26.096299,
                            44.437124
                        ],
                        [
                            26.095713,
                            44.437415
                        ],
                        [
                            26.095315,
                            44.437619
                        ],
                        [
                            26.09519,
                            44.437679
                        ],
                        [
                            26.095129,
                            44.437709
                        ],
                        [
                            26.094668,
                            44.438021
                        ],
                        [
                            26.094566,
                            44.438082
                        ],
                        [
                            26.094496,
                            44.438128
                        ],
                        [
                            26.09442,
                            44.438184
                        ],
                        [
                            26.094326,
                            44.438266
                        ],
                        [
                            26.094213,
                            44.438389
                        ],
                        [
                            26.094125,
                            44.4385
                        ],
                        [
                            26.093932,
                            44.43877
                        ],
                        [
                            26.093664,
                            44.439272
                        ],
                        [
                            26.093619,
                            44.439361
                        ],
                        [
                            26.093499,
                            44.439626
                        ],
                        [
                            26.093321,
                            44.440014
                        ],
                        [
                            26.093244,
                            44.440116
                        ],
                        [
                            26.09315,
                            44.440229
                        ],
                        [
                            26.09302,
                            44.440407
                        ],
                        [
                            26.09278,
                            44.440743
                        ],
                        [
                            26.092687,
                            44.440905
                        ],
                        [
                            26.09253,
                            44.441299
                        ],
                        [
                            26.092485,
                            44.441402
                        ],
                        [
                            26.092381,
                            44.441657
                        ],
                        [
                            26.092318,
                            44.441932
                        ],
                        [
                            26.092314,
                            44.44205
                        ],
                        [
                            26.092271,
                            44.442112
                        ],
                        [
                            26.092161,
                            44.442264
                        ],
                        [
                            26.092057,
                            44.442349
                        ],
                        [
                            26.091341,
                            44.442452
                        ],
                        [
                            26.091261,
                            44.442523
                        ],
                        [
                            26.091022,
                            44.442772
                        ],
                        [
                            26.090726,
                            44.443045
                        ],
                        [
                            26.090178,
                            44.44344
                        ]
                    ],
                    "type": "LineString"
                }
            }
        ],
        "bbox": [
            26.090178,
            44.411687,
            26.163932,
            44.444335
        ],
        "metadata": {
            "attribution": "openrouteservice.org, OpenStreetMap contributors",
            "service": "routing",
            "timestamp": 1604687273008,
            "query": {
                "coordinates": [
                    [
                        26.1347683,
                        44.4443487
                    ],
                    [
                        26.1604182,
                        44.4125858
                    ],
                    [
                        26.0901043,
                        44.4433876
                    ]
                ],
                "profile": "driving-car",
                "format": "geojson"
            },
            "engine": {
                "version": "6.3.1",
                "build_date": "2020-11-01T09:49:06Z",
                "graph_date": "2020-10-24T20:42:02Z"
            }
        }
    }
    // initialize map
    let map = L.map('mapid').setView([44.432283, 26.104162], 15);
    L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 18
    }).addTo(map);

    colors = ['blue', 'red', 'green', 'purple'];
    // add route to map
    // let path = L.geoJSON(routeGeoJson).addTo(map);
    // map.addLayer(path);
    // center map to fit the route
    // map.fitBounds(path.getBounds());

    // let markerStart = L.marker([
    //     44.4443487,
    //     26.1347683
    // ]).addTo(map);
    // markerStart.bindPopup('Starting point');
    //
    //
    // map.on('click', function (e) {
    //     var marker = new L.marker(e.latlng).addTo(map);
    //     marker.bindPopup(marker.getLatLng().lat + ', ' + marker.getLatLng().lng);
    //
    // });


    async function showSolutionOnMap(optimizedSolution) {
        let cont = 0;
        for (const route of optimizedSolution.routes) {
            let locationsArray = [];
            route.locations.forEach(location => {
                locationsArray.push(location.location)
                L.marker([
                    location.location[1],
                    location.location[0]
                ]).addTo(map);
            })


            let vehicleRoute = await getDirections(locationsArray);

            let path = L.geoJSON(vehicleRoute);

            path.setStyle({
                color: colors[cont++]
            });
            map.addLayer(path);
            map.fitBounds(path.getBounds());


        }
    }

    async function getDirections(coordinates) {
        let directionsApiUrl = "http://localhost:8080/ors/v2/directions/driving-car/geojson";

        return await fetch(directionsApiUrl, {
            method: "POST",
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({coordinates: coordinates})
        }).then(response => response.json());
    }

    // Solving the problem
    async function solveVehicleRoutingProblem() {
        // first address is the depot
        let addresses = [
            "Str. Sinaia 18, bucuresti",
            "Aleea magura vulturului 7",
            "Constantin Budisteanu 20",
            "Aleea Ilioara 3"
        ];
        // the weight (demand) of the package for each address destination (todo: maybe include this in the addresses object)
        // first is the depot so the value is 0
        let demands = [0, 3, 5, 1];
        // we have two cars each having a capacity of 5
        let carsWithCapacity = [5, 5];

        // get the polar coordinates (lat, lng) from the nominatim api
        let nominatimResponses = addresses.map(address => getCoordinates(address));
        const nominatimObjects = await Promise.all(nominatimResponses);

        // extract the lat/lng from each nominatim query response and map them in an object required by the distance matrix
        // e.g {"locations":[[26.1347683,44.4443487],[26.1604182,44.4125858],[26.0901043,44.4433876]]}
        let locations = nominatimObjects
            .flat(1)
            .map(object => [object.lon, object.lat]);

        // call the openrouteservice api to get the distance matrix
        let distanceMatrix = await getDistanceMatrix(locations);

        // add the demands and cars to the response from the distance matrix
        addDemands(distanceMatrix, demands);
        addCars(distanceMatrix, carsWithCapacity);

        // send the distance matrix object to the Flask backend to calculate the routes
        const optimizedSolution = await getSolution(distanceMatrix);

        showSolutionOnMap(optimizedSolution)
        console.log(optimizedSolution);
    }

    async function getCoordinates(address) {
        let nominatinApiUrl = "http://localhost:7070";

        return await fetch(nominatinApiUrl + "/search?q=" + address + "&format=jsonv2", {
            method: "POST"
        }).then(response => response.json());
    }

    async function getDistanceMatrix(locations) {
        let matrixApiUrl = "http://localhost:8080/ors/v2/matrix/driving-car";

        return await fetch(matrixApiUrl, {
            method: "POST",
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({locations: locations})
        }).then(response => response.json());
    }

    function addDemands(distanceMatrix, demands) {
        // add the demands of each location in the response received from the distance matrix api
        // the demands are added in the metadata.query.locations object
        for (let i = 0; i < demands.length; i++) {
            distanceMatrix.metadata.query.locations[i] = {
                location: distanceMatrix.metadata.query.locations[i],
                demand: demands[i]
            };
        }

    }

    function addCars(distanceMatrix, carsWithCapacity) {
        distanceMatrix.metadata.cars = carsWithCapacity;
    }

    async function getSolution(distanceMatrix) {
        console.log(distanceMatrix);
        return fetch("http://localhost:5001/api/optimization", {
            method: "POST",
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(distanceMatrix)
        }).then(response => response.json());
    }


    // this will run at page load and refresh
    solveVehicleRoutingProblem();
</script>